<!DOCTYPE html>
<html manifest="index.manifest">

<head>

<title>MVK Clocks</title>

<meta name="viewport" content="width=850, initial-scale=.4">
<meta name="apple-mobile-web-app-capable" content="yes">

<link rel="shortcut icon" href="index.ico">

<link rel="apple-touch-icon" href="iOS-icon.png" />

<link rel="apple-touch-startup-image" href="launch-640x1136.png" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="launch-750x1294.png" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="launch-1242x2148.png" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="launch-1125x2436.png" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="launch-1536x2048.png" media="(min-device-width: 768px) and (max-device-width: 1024px) and (-webkit-min-device-pixel-ratio: 2) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="launch-1668x2224.png" media="(min-device-width: 834px) and (max-device-width: 834px) and (-webkit-min-device-pixel-ratio: 2) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="launch-2048x2732.png" media="(min-device-width: 1024px) and (max-device-width: 1024px) and (-webkit-min-device-pixel-ratio: 2) and (orientation: portrait)">

<style>

html, body, #wrapper {
   height:100%;
   width: 100%;
   margin: 0;
   padding: 0;
   border: 0;
}
#wrapper td {
   vertical-align: middle;
   text-align: center;
}

</style>

<script type="text/javascript">
function updateClock (){
  var currentTime = new Date ();
  
  //Get the day for the updating clock
  var currentDay = currentTime.getDay ();

  var dayFull;
  var dayShort;

  if (currentDay == 0){
    dayFull = "Sunday";
    dayShort = "Sun";
  }

  if (currentDay == 1){
    dayFull = "Monday";
    dayShort = "Mon";
  }

  if (currentDay == 2){
    dayFull = "Tuesday";
    dayShort = "Tue";
  }

  if (currentDay == 3){
    dayFull = "Wednesday";
    dayShort = "Wed";
  }

  if (currentDay == 4){
    dayFull = "Thursday";
    dayShort = "Thu";
  }

  if (currentDay == 5){
    dayFull = "Friday";
    dayShort = "Fri";
  }

  if (currentDay == 6){
    dayFull = "Saturday";
    dayShort = "Sat";
  }


  //Get the month for the updating clock
  var currentMonth = currentTime.getMonth ();

  //Adjust for zero month start
  currentMonth = currentMonth + 1;

  var currentMonthPadded = ( currentMonth < 10 ? "0" : "" ) + currentMonth;


  var monthFull;
  var monthShort;

  if (currentMonth == 1){
    monthFull = "January";
    monthShort = "Jan";
  }

  if (currentMonth == 2){
    monthFull = "February";
    monthShort = "Feb";
  }

  if (currentMonth == 3){
    monthFull = "March";
    monthShort = "Mar";
  }

  if (currentMonth == 4){
    monthFull = "April";
    monthShort = "Apr";
  }

  if (currentMonth == 5){
    monthFull = "May";
    monthShort = "May";
  }

  if (currentMonth == 6){
    monthFull = "June";
    monthShort = "Jun";
  }

  if (currentMonth == 7){
    monthFull = "July";
    monthShort = "Jul";
  }

  if (currentMonth == 8){
    monthFull = "August";
    monthShort = "Aug";
  }

  if (currentMonth == 9){
    monthFull = "September";
    monthShort = "Sep";
  }

  if (currentMonth == 10){
    monthFull = "October";
    monthShort = "Oct";
  }

  if (currentMonth == 11){
    monthFull = "November";
    monthShort = "Nov";
  }

  if (currentMonth == 12){
    monthFull = "December";
    monthShort = "Dec";
  }


  //Get the date for the updating clock
  var currentDate = currentTime.getDate ();

  var currentDatePadded = ( currentDate < 10 ? "0" : "" ) + currentDate;


  //Get the year for the updating clock
  var currentYear = currentTime.getFullYear ();

  var yearFull = currentYear;

  //Get 2-digit year -- this will only work until 2099
  var yearShort = currentYear - 2000;

  //Padding for 2-digit year -- only needed for dates before 2010
  yearShort = ( yearShort < 10 ? "0" : "" ) + yearShort;


  //Get the hours for updating clock
  var currentHours = currentTime.getHours ();
  
  //Get the minutes for updating clock
  var currentMinutes = currentTime.getMinutes ();
  
  //Get the secconds for updating clock
  var currentSeconds = currentTime.getSeconds ();

  // Choose either "AM" or "PM" as appropriate
  var timeOfDay = ( currentHours < 12 ) ? "AM" : "PM";

  // Convert the hours component to 12-hour format if needed
  var current12Hours = currentHours;
  current12Hours = ( current12Hours > 12 ) ? current12Hours - 12 : current12Hours;

  // Convert an hours component of "0" to "12"
  current12Hours = ( current12Hours == 0 ) ? 12 : current12Hours;


  // Pad the hours, minutes and seconds with leading zeros, if required
  currentHours = ( currentHours < 10 ? "0" : "" ) + currentHours;
  currentMinutes = ( currentMinutes < 10 ? "0" : "" ) + currentMinutes;
  currentSeconds = ( currentSeconds < 10 ? "0" : "" ) + currentSeconds;


  //Get the UTC year for the updating clock
  var currentUTCYear = currentTime.getUTCFullYear ();

  //Get the number of milliseconds since midnight Jan 1, 1970 UTC
  var currentUNIXtime = currentTime.getTime ();

  //Calculate DOY
  var currentUTCDOY = Math.floor((currentUNIXtime - Date.UTC(currentUTCYear,0,0))/(24*60*60*1000));

  if (currentUTCDOY < 100){
	if (currentUTCDOY < 10){
		currentUTCDOY = "0" + currentUTCDOY;	
	}
	currentUTCDOY = "0" + currentUTCDOY;
  }

  //Get the UTC hours for updating clock
  var currentUTCHours = currentTime.getUTCHours ();
  
  //Get the UTC minutes for updating clock
  var currentUTCMinutes = currentTime.getUTCMinutes ();
  
  //Get the UTC secconds for updating clock
  var currentUTCSeconds = currentTime.getUTCSeconds ();

  // Pad the UTC hours, minutes and seconds with leading zeros, if required
  currentUTCHours = ( currentUTCHours < 10 ? "0" : "" ) + currentUTCHours;
  currentUTCMinutes = ( currentUTCMinutes < 10 ? "0" : "" ) + currentUTCMinutes;
  currentUTCSeconds = ( currentUTCSeconds < 10 ? "0" : "" ) + currentUTCSeconds;


  //Get the ISO week number (http://www.jslab.dk/library/Date.getISOWeek)

    var y = currentTime.getUTCFullYear();
    var m = currentTime.getUTCMonth() + 1;
    var d = currentTime.getUTCDate();
    // If month jan. or feb.
    if (m < 3) {
      var a = y - 1;
      var b = (a / 4 | 0) - (a / 100 | 0) + (a / 400 | 0);
      var c = ( (a - 1) / 4 | 0) - ( (a - 1) / 100 | 0) + ( (a - 1) / 400 | 0);
      var s = b - c;
      var e = 0;
      var f = d - 1 + 31 * (m - 1);
    }
    // If month mar. through dec.
    else {
      var a = y;
      var b = (a / 4 | 0) - ( a / 100 | 0) + (a / 400 | 0);
      var c = ( (a - 1) / 4 | 0) - ( (a - 1) / 100 | 0) + ( (a - 1) / 400 | 0);
      var s = b - c;
      var e = s + 1;
      var f = d + ( (153 * (m - 3) + 2) / 5 | 0) + 58 + s;
    }
    var g = (a + b) % 7;
    // ISO Weekday (0 is monday, 1 is tuesday etc.)
    var d = (f + g - e) % 7;
    var n = f + 3 - d;
    if (n < 0){
      var w = 53 - ( (g - s) / 5 | 0);
    }
    else if (n > 364 + s){
      var w = 1;
    }
    else{
      var w = (n / 7 | 0) + 1;
    };

  var currentISOWeek = ( w < 10 ? "0" : "" ) + w;


  //Get the timezone offset
  var timezoneOffset = currentTime.getTimezoneOffset();
  timezoneOffset = timezoneOffset/60;

  if (timezoneOffset == 7){
    var timeZone = "PDT";	
  } 
  else if (timezoneOffset == 8){
    var timeZone = "PST";
  }
  else {
    var timeZone = "";
  }

  var timezoneOffsetString = "0000";	

  if (timezoneOffset != 0){
    var timezoneOffsetString = "0" + timezoneOffset*100;
  } 

  var landingUNIX = 1344230212.090; //2012-219T05:16:52
  var landingSCLK = 397502081.314;
  var beginSol00000SCLK = 397446468.740;
				
  var SCLKoffset = landingUNIX - landingSCLK;
  var MarsTimeRatio = 1.02749125;

  var leapSec = 2;

  var MSLtime = (new Date().getTime() / 1000) - SCLKoffset + leapSec;
  var MSLtimeValue = (new Date().getTime() / 1000) - SCLKoffset + leapSec;	
				
  if (MSLtime < landingSCLK) {
    MSLtime = landingSCLK - MSLtime;
    var days = Math.floor(MSLtime/(24*60*60));
    var hours = Math.floor((MSLtime/(60*60))-(days*24));
    var minutes = Math.floor((MSLtime/(60))-(days*24*60)-(hours*60));
    var seconds = Math.floor(MSLtime-(days*24*60*60)-(hours*60*60)-(minutes*60));
					
    var MSLoutput = "Landing - " + days + ((days == 1) ? " day " : " days ") + ((hours < 10) ? "0" : "") + hours + ((minutes < 10) ? ":0" : ":") + minutes + ((seconds < 10) ? ":0" : ":") + seconds;
							
  } else {
    MSLtime = (MSLtime - beginSol00000SCLK)/MarsTimeRatio;
    var sols = Math.floor(MSLtime/(24*60*60));
    var hours = Math.floor((MSLtime/(60*60))-(sols*24));
    var minutes = Math.floor((MSLtime/(60))-(sols*24*60)-(hours*60));
    var seconds = Math.floor(MSLtime-(sols*24*60*60)-(hours*60*60)-(minutes*60));
					
    var MSLoutput = "Sol-" + ((sols < 10) ? "0000" : ((sols < 100) ? "000" : ((sols < 1000) ? "00" : ((sols < 10000) ? "0" : "" )))) + sols + "M" + ((hours < 10) ? "0" : "") + hours + ((minutes < 10) ? ":0" : ":") + minutes + ((seconds < 10) ? ":0" : ":") + seconds;
						
  }

  var MSLsolString = "Sol " + ((sols < 10) ? "0000" : ((sols < 100) ? "000" : ((sols < 1000) ? "00" : ((sols < 10000) ? "0" : "" )))) + sols;
  var MSLlmst = ((hours < 10) ? "0" : "") + hours + ((minutes < 10) ? ":0" : ":") + minutes + ((seconds < 10) ? ":0" : ":") + seconds + " LMST";

  var surfaceUNIX = 1381317960;
  var surfaceSCLK = 434589485;
  var sclkScetRatio = 1.000009438;

  var SCLKtimeValue = (((new Date().getTime() / 1000) - surfaceUNIX) / sclkScetRatio) + surfaceSCLK + leapSec;

  var SCLKvalue = Math.floor(SCLKtimeValue);
  var SCLKstring = "(SCLK = " + SCLKvalue + ")";

  // Compose the string for display
  var fullDateString = dayFull + ", " + monthFull + " " + currentDate + ", " + yearFull;
  //var fullDateString = "Wednesday" + ", " + "September" + " " + "30" + ", " + "2018";
  var mmyyddddDateString = currentMonthPadded + "/" + currentDatePadded + "/" + yearFull;

  var localDate = fullDateString + " (" + mmyyddddDateString + ")";
  
  var local24TimeString = currentHours + ":" + currentMinutes + ":" + currentSeconds;
  var local12TimeString = current12Hours + ":" + currentMinutes + ":" + currentSeconds + " " + timeOfDay;

  var localTime = local12TimeString + " = " + local24TimeString + " " + timeZone + " (UTC-" + timezoneOffsetString + ")";
  var localTimeTZ = local24TimeString + " " + timeZone;
  var localTimeOffsetString = "(UTC-" + timezoneOffsetString + ")";

  var UTCTimeString = currentUTCYear + "-" + currentUTCDOY + "T" + currentUTCHours + ":" + currentUTCMinutes + ":" + currentUTCSeconds + "  ---  Week " + currentISOWeek;

  var UTCTimeOnlyString = currentUTCYear + "-" + currentUTCDOY + "T" + currentUTCHours + ":" + currentUTCMinutes + ":" + currentUTCSeconds;
  var UTCweek = "Week " + currentISOWeek;

  var ISOdateString = "(" + yearFull + "-" + currentMonthPadded + "-" + currentDatePadded + ")";

  // Update the time display
  var text1=document.createTextNode(String(localDate));
  var lb1=document.createElement("BR");
  var text2=document.createTextNode(String(localTime));
  var lb2=document.createElement("BR");
  var lb3=document.createElement("BR");
  var text3=document.createTextNode(String(UTCTimeString));
  var lb4=document.createElement("BR");
  var lb5=document.createElement("BR");
  var text4=document.createTextNode(String(MSLoutput));

  var text5=document.createTextNode(String(fullDateString));
  var lb6=document.createElement("BR");
  var text6=document.createTextNode(String(ISOdateString));
  var lb7=document.createElement("BR");
  var lb8=document.createElement("BR");
  
  var text7=document.createTextNode(String(local12TimeString));
  var lb9=document.createElement("BR");
  var text8=document.createTextNode(String(localTimeTZ));
  var lb10=document.createElement("BR");
  var text9=document.createTextNode(String(localTimeOffsetString));
  var lb11=document.createElement("BR");
  var lb12=document.createElement("BR");

  var text10=document.createTextNode(String(UTCTimeOnlyString));
  var lb13=document.createElement("BR");
  var text11=document.createTextNode(String(UTCweek));
  var lb14=document.createElement("BR");
  var lb15=document.createElement("BR");

  var text12=document.createTextNode(String(MSLsolString));
  var lb16=document.createElement("BR");
  var text13=document.createTextNode(String(MSLlmst));
  var lb17=document.createElement("BR");
  var text14=document.createTextNode(String(SCLKstring));
  var lb18=document.createElement("BR");
  var lb19=document.createElement("BR");

//var display=document.getElementById("clock");
//display.appendChild(text1);
//display.appendChild(lb1);
//display.appendChild(text2);
//display.appendChild(lb2);
//display.appendChild(lb3);
//display.replaceChild(text1,display.childNodes[0]);
//display.replaceChild(lb1,display.childNodes[1]);
//display.replaceChild(text2,display.childNodes[2]);
//display.replaceChild(lb2,display.childNodes[3]);
//display.replaceChild(lb3,display.childNodes[4]);


//var displayUTC=document.getElementById("clockUTC");
//displayUTC.appendChild(text3);
//displayUTC.appendChild(lb4);
//displayUTC.appendChild(lb5);
//displayUTC.replaceChild(text3,displayUTC.childNodes[0]);
//displayUTC.replaceChild(lb4,displayUTC.childNodes[1]);
//displayUTC.replaceChild(lb5,displayUTC.childNodes[2]);  
  
  
//var displayLMST=document.getElementById("clockLMST");  
//displayLMST.appendChild(text4);
//displayLMST.replaceChild(text4,displayLMST.childNodes[0]);


  var displayPhone=document.getElementById("datePhone");
  displayPhone.appendChild(text5);
  displayPhone.appendChild(lb6);
  displayPhone.appendChild(text6);
  displayPhone.appendChild(lb7);
//  displayPhone.appendChild(lb8);
  displayPhone.replaceChild(text5,displayPhone.childNodes[0]);
  displayPhone.replaceChild(lb6,displayPhone.childNodes[1]);
  displayPhone.replaceChild(text6,displayPhone.childNodes[2]);
  displayPhone.replaceChild(lb7,displayPhone.childNodes[3]);
//  displayPhone.replaceChild(lb8,displayPhone.childNodes[4]);

  var displayPhone2=document.getElementById("timePhone");
  displayPhone2.appendChild(text7);
  displayPhone2.appendChild(lb9);
  displayPhone2.appendChild(text8);
  displayPhone2.appendChild(lb10);
  displayPhone2.appendChild(text9);
  displayPhone2.appendChild(lb11);
//  displayPhone2.appendChild(lb12);
  displayPhone2.replaceChild(text7,displayPhone2.childNodes[0]);
  displayPhone2.replaceChild(lb9,displayPhone2.childNodes[1]);
  displayPhone2.replaceChild(text8,displayPhone2.childNodes[2]);
  displayPhone2.replaceChild(lb10,displayPhone2.childNodes[3]);
  displayPhone2.replaceChild(text9,displayPhone2.childNodes[4]);
  displayPhone2.replaceChild(lb11,displayPhone2.childNodes[5]);
//  displayPhone2.replaceChild(lb12,displayPhone2.childNodes[6]);

  var displayPhone3=document.getElementById("utcPhone");
  displayPhone3.appendChild(text10);
  displayPhone3.appendChild(lb13);
  displayPhone3.appendChild(text11);
  displayPhone3.appendChild(lb14);
//  displayPhone3.appendChild(lb15);
  displayPhone3.replaceChild(text10,displayPhone3.childNodes[0]);
  displayPhone3.replaceChild(lb13,displayPhone3.childNodes[1]);
  displayPhone3.replaceChild(text11,displayPhone3.childNodes[2]);
  displayPhone3.replaceChild(lb14,displayPhone3.childNodes[3]);
//  displayPhone3.replaceChild(lb15,displayPhone3.childNodes[4]);


  var displayPhone4=document.getElementById("lmstPhone");
  displayPhone4.appendChild(text12);
  displayPhone4.appendChild(lb16);
  displayPhone4.appendChild(text13);
  displayPhone4.appendChild(lb17);
  displayPhone4.appendChild(text14);
  displayPhone4.appendChild(lb18);
  displayPhone4.replaceChild(text12,displayPhone4.childNodes[0]);
  displayPhone4.replaceChild(lb16,displayPhone4.childNodes[1]);
  displayPhone4.replaceChild(text13,displayPhone4.childNodes[2]);
  displayPhone4.replaceChild(lb17,displayPhone4.childNodes[3]);
  displayPhone4.replaceChild(text14,displayPhone4.childNodes[4]);
  displayPhone4.replaceChild(lb18,displayPhone4.childNodes[5]);

}
</script>
</head>

<body style="background-color:dimgray;" onload="updateClock(); setInterval('updateClock()', 1000 )">

<table id="wrapper">
    <tr>
        <td>

          <div style="text-align: center;">
            <span id="datePhone" style="font-family: Arial; font-weight: Bold; font-size: 375%; color: White">&nbsp;</span>
            <br>
            <hr>
            <br>
            <span id="timePhone" style="font-family: Arial; font-weight: Bold; font-size: 375%; color: White">&nbsp;</span>
            <br>
            <hr>
            <br>
            <span id="utcPhone" style="font-family: Arial; font-weight: Bold; font-size: 375%; color: darkblue">&nbsp;</span>
            <br>
            <hr>
            <br>
            <span id="lmstPhone" style="font-family: Arial; font-weight: Bold; font-size: 375%; color: darkred">&nbsp;</span>

            <span id="clock" style="font-family: Arial; font-weight: Bold; font-size: 200%; color: White">&nbsp;</span>
            <span id="clockUTC" style="font-family: Arial; font-weight: Bold; font-size: 200%; color: darkblue">&nbsp;</span>
            <span id="clockLMST" style="font-family: Arial; font-weight: Bold; font-size: 200%; color: darkred">&nbsp;</span>
          <!--
            <span id="clock" style="font-family: Arial; font-weight: Bold; font-size: 200%; color: White">&nbsp;</span>
          -->
          </div>

        </td>
    </tr>
</table>

<footer id="settings"><p align="center" style="color:white; font-family: Arial">
    <input type="checkbox" id="toggle" onchange="isChecked(this.id)"/> Stay awake?<br><br>
</p></footer>

<script src="NoSleep.min.js"></script>

<script>

var noSleep = new NoSleep();
var wakeLockEnabled = false;

function isChecked(id) {
    var inputCheckbox = document.getElementById(id);
    if(!inputCheckbox.checked) {
        noSleep.disable(); // let the screen turn off.
        wakeLockEnabled = false;
    } else {
        noSleep.enable(); // keep the screen on!
        wakeLockEnabled = true;
    }
}

</script>

</body>
</html>
